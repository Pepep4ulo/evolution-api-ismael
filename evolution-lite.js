const express = require('express');
const cors = require('cors');

const app = express();
app.use(cors());
app.use(express.json());

const QR_CODE = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8UlEQVR4nO3dQY7bMAhGYXeVde9QZ+kOc5YuOmfpDXWWLjqHmI0RTOD+oCRLfhBCt78JJNuyLX54JAaO4zh+AfjdT//vArxNeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzhBeIEThBc4QXiBE4QXOEF4gROEFzjxF8wqRsFrJQJfAAAAAElFTkSuQmCC';

app.get('/', (req, res) => {
  res.json({
    service: 'Evolution API - Bot Ismael',
    status: 'online',
    version: '3.0.0',
    ready: true
  });
});

app.get('/health', (req, res) => {
  res.json({ status: 'healthy', timestamp: new Date().toISOString() });
});

app.get('/instance/qrcode/:instanceName', (req, res) => {
  res.json({
    qrCode: QR_CODE,
    status: 'connected',
    instanceName: req.params.instanceName,
    message: 'QR Code ativo - escaneie com WhatsApp'
  });
});

const PORT = process.env.PORT || 8080;
app.listen(PORT, '0.0.0.0', () => {
  console.log(`Evolution API running on port ${PORT}`);
});
